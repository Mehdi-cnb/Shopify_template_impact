{% liquid
  assign selected_product = section.settings.product
%}

{% if selected_product %}
  <section
    class="featured-kaching-product"
    data-product-id="{{ selected_product.id }}"
  >
    {% if section.settings.title != blank %}
      <h2 class="featured-kaching-title">
        {{ section.settings.title }}
      </h2>
    {% endif %}

    <div class="featured-kaching-content">
      <div class="featured-kaching-media">
<img
  src="{{ selected_product.featured_image | image_url: width: 600 }}"
  alt="{{ selected_product.title | escape }}"
  width="{{ selected_product.featured_image.width }}"
  height="{{ selected_product.featured_image.height }}"
  loading="lazy"
>
      </div>

      <div class="featured-kaching-info">
        <h3 class="product-title">
          {{ selected_product.title }}
        </h3>

        <p class="product-price">
          {{ selected_product.price | money }}
        </p>

        <!-- Conteneur Kaching -->
        <div
          class="kaching-bundle-container"
          data-kaching-bundle
          data-product-id="{{ selected_product.id }}"
        ></div>

        <button
          class="featured-kaching-cta"
          onclick="window.location.href='{{ selected_product.url }}'"
        >
          Voir le produit
        </button>
      </div>
    </div>
  </section>
{% endif %}

<style>
.featured-kaching-product {
  padding: 32px 16px;
}

.featured-kaching-content {
  display: grid;
  grid-template-columns: 1fr;
  gap: 24px;
}

@media (min-width: 768px) {
  .featured-kaching-content {
    grid-template-columns: 1fr 1fr;
    align-items: center;
  }
}

.featured-kaching-title {
  text-align: center;
  font-size: 26px;
  margin-bottom: 24px;
}

.product-title {
  font-size: 20px;
  font-weight: 600;
}

.product-price {
  font-size: 18px;
  margin: 8px 0 16px;
}

.featured-kaching-cta {
  margin-top: 16px;
  width: 100%;
  padding: 14px;
  font-size: 16px;
  font-weight: 600;
}
</style>

{% schema %}
{
  "name": "Leggings",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Produit Ã  afficher"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre de la section",
      "default": "Notre offre la plus populaire"
    }
  ],
  "presets": [
    {
      "name": "Produit avec bundle Kaching"
    }
  ]
}
{% endschema %}
